<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ê—Ä–±–∏—Ç—Ä–∞–∂–∞ - –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–π —Å—Ç–∞–≤–æ–∫</title>
    <meta name="description" content="–û–Ω–ª–∞–π–Ω –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 2 –∏ 3 –∏—Å—Ö–æ–¥–æ–≤, –∏—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—á—ë—Ç–æ–≤, —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ.">
    <meta name="keywords" content="–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤, –∞–Ω–∞–ª–∏–∑ —Å—Ç–∞–≤–æ–∫, –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –±–µ—Ç—Ç–∏–Ω–≥–∞, —Ä–∞—Å—á–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–π">
    <meta property="og:title" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ê—Ä–±–∏—Ç—Ä–∞–∂–∞">
    <meta property="og:description" content="–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –±–µ—Ç—Ç–∏–Ω–≥–∞">
    
    <!-- Yandex.RTB Loader -->
    <script>window.yaContextCb=window.yaContextCb||[]</script>
    <script src="https://yandex.ru/ads/system/context.js" async></script>
    
    <style>
        :root {
            --color-bg-primary: #f5f5f5;
            --color-surface: #ffffff;
            --color-primary: #21808d;
            --color-primary-hover: #1d7480;
            --color-text-primary: #13343b;
            --color-text-secondary: #626c70;
            --color-border: rgba(94, 82, 64, 0.2);
            --color-success: #21808d;
            --color-error: #c0152f;
            --color-card-border: rgba(94, 82, 64, 0.12);
            --font-family-base: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --color-bg-primary: #1f2121;
                --color-surface: #262828;
                --color-text-primary: #f5f5f5;
                --color-text-secondary: rgba(167, 169, 169, 0.7);
                --color-border: rgba(119, 124, 124, 0.3);
                --color-primary: #32b8c6;
                --color-primary-hover: #2da6b2;
                --color-card-border: rgba(119, 124, 124, 0.2);
            }
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: var(--font-family-base); background: var(--color-bg-primary); color: var(--color-text-primary); padding: 0; line-height: 1.6; }

        nav { background: var(--color-surface); border-bottom: 1px solid var(--color-border); padding: 0; position: sticky; top: 0; z-index: 100; }
        nav .container { max-width: 900px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; }
        nav a { color: var(--color-primary); text-decoration: none; padding: 15px 20px; display: inline-block; font-weight: 500; transition: background 0.3s; }
        nav a:hover, nav a.active { background: rgba(33, 128, 141, 0.1); color: var(--color-primary-hover); }

        .container { max-width: 900px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 40px; padding: 20px; }
        h1 { font-size: 32px; font-weight: 600; margin-bottom: 10px; color: var(--color-primary); }
        .subtitle { color: var(--color-text-secondary); font-size: 16px; }
        .calculator-card { background: var(--color-surface); border-radius: 12px; padding: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border: 1px solid var(--color-card-border); margin-bottom: 20px; margin-left: 20px; margin-right: 20px; }
        .section-title { font-size: 18px; font-weight: 600; margin-bottom: 20px; color: var(--color-text-primary); padding-bottom: 10px; border-bottom: 2px solid var(--color-primary); }
        .input-group { margin-bottom: 20px; }
        label { display: block; font-size: 14px; font-weight: 500; margin-bottom: 8px; color: var(--color-text-primary); }
        input, select { width: 100%; padding: 12px 16px; border: 1px solid var(--color-border); border-radius: 8px; font-size: 16px; background: var(--color-surface); color: var(--color-text-primary); transition: border-color 0.3s ease; }
        input:focus, select:focus { outline: none; border-color: var(--color-primary); }
        .two-column { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .button-primary { width: 100%; padding: 16px; background: var(--color-primary); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: background 0.3s ease; margin-top: 10px; }
        .button-primary:hover { background: var(--color-primary-hover); }
        .result-card { background: var(--color-surface); border-radius: 12px; padding: 25px; border: 2px solid var(--color-primary); margin-top: 20px; display: none; margin-left: 20px; margin-right: 20px; }
        .result-card.show { display: block; animation: slideIn 0.4s ease; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .result-row { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--color-border); }
        .result-row:last-child { border-bottom: none; }
        .result-label { font-weight: 500; color: var(--color-text-secondary); }
        .result-value { font-weight: 600; color: var(--color-text-primary); font-size: 18px; }
        .profit-highlight { background: rgba(33, 128, 141, 0.1); padding: 20px; border-radius: 8px; margin-top: 20px; text-align: center; }
        .profit-value { font-size: 36px; font-weight: 700; color: var(--color-success); margin: 10px 0; }
        .profit-label { font-size: 14px; color: var(--color-text-secondary); text-transform: uppercase; letter-spacing: 1px; }
        .bet-breakdown { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
        .bet-card { background: rgba(33, 128, 141, 0.05); padding: 20px; border-radius: 8px; border: 1px solid var(--color-card-border); }
        .bet-card h3 { font-size: 16px; margin-bottom: 15px; color: var(--color-primary); }
        .bet-detail { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 14px; }
        .error-message { background: rgba(192, 21, 47, 0.1); color: var(--color-error); padding: 15px; border-radius: 8px; margin-top: 15px; display: none; }
        .error-message.show { display: block; }
        .formula-box { background: rgba(33, 128, 141, 0.05); padding: 20px; border-radius: 8px; margin-top: 20px; border-left: 4px solid var(--color-primary); }
        .formula-title { font-weight: 600; margin-bottom: 10px; color: var(--color-primary); }
        .formula { font-family: monospace; font-size: 14px; color: var(--color-text-secondary); line-height: 1.8; }
        footer { background: var(--color-surface); border-top: 1px solid var(--color-border); padding: 30px 20px; text-align: center; margin-top: 40px; color: var(--color-text-secondary); font-size: 12px; }
        @media (max-width: 768px) { .two-column, .bet-breakdown { grid-template-columns: 1fr; } nav .container { flex-direction: column; align-items: flex-start; } nav a { padding: 10px 20px; } }
    </style>
</head>
<body>
    <nav>
        <div class="container">
            <a href="index.html" class="active">üìä –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</a>
            <div>
                <a href="privacy.html">–ü–æ–ª–∏—Ç–∏–∫–∞</a>
                <a href="terms.html">–£—Å–ª–æ–≤–∏—è</a>
                <a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="header">
            <h1>‚öñÔ∏è –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ê–Ω–∞–ª–∏–∑–∞</h1>
            <p class="subtitle">–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å—Ç–∞–≤–æ–∫</p>
            
            <div style="margin: 20px 0; min-height: 90px;">
                <div id="yandex_rtb_R-A-17819625-1"></div>
                <script>
                    window.yaContextCb.push(() => {
                        Ya.Context.AdvManager.render({
                            "blockId": "R-A-17819625-1",
                            "renderTo": "yandex_rtb_R-A-17819625-1"
                        })
                    })
                </script>
            </div>
        </div>

        <div class="calculator-card">
            <div class="section-title">üìä –î–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞</div>
            
            <div class="input-group">
                <label for="bankroll">üí∞ –°—É–º–º–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ (—Ä—É–±–ª–∏)</label>
                <input type="number" id="bankroll" placeholder="10000" value="10000" min="1">
            </div>

            <div class="input-group">
                <label for="outcomes">üéØ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å—Ö–æ–¥–æ–≤</label>
                <select id="outcomes" onchange="updateInputs()">
                    <option value="2">2 –∏—Å—Ö–æ–¥–∞</option>
                    <option value="3">3 –∏—Å—Ö–æ–¥–∞</option>
                </select>
            </div>

            <div id="oddsInputs">
                <div class="two-column">
                    <div class="input-group">
                        <label for="k1">üî¢ –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç 1</label>
                        <input type="number" id="k1" placeholder="2.10" step="0.01" min="1.01">
                    </div>
                    <div class="input-group">
                        <label for="k2">üî¢ –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç 2</label>
                        <input type="number" id="k2" placeholder="2.05" step="0.01" min="1.01">
                    </div>
                </div>
                <div class="input-group" id="k3Group" style="display: none;">
                    <label for="k3">üî¢ –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç 3</label>
                    <input type="number" id="k3" placeholder="3.40" step="0.01" min="1.01">
                </div>
            </div>

            <button class="button-primary" onclick="calculate()">üßÆ –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>

            <div style="margin-top: 20px;">
                <button class="button-primary" onclick="saveToHistory()" style="background: rgba(33, 128, 141, 0.2); color: var(--color-primary);">
                    üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                </button>
            </div>

            <div class="error-message" id="errorMsg"></div>
        </div>

        <div class="calculator-card" id="historySection" style="display: none;">
            <div class="section-title">üìú –ò—Å—Ç–æ—Ä–∏—è –∞–Ω–∞–ª–∏–∑–æ–≤</div>
            <div id="historyList"></div>
            <button class="button-primary" onclick="clearHistory()" style="background: var(--color-error); margin-top: 15px;">
                üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
            </button>
        </div>

        <div class="result-card" id="results">
            <div class="section-title">‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞</div>

            <div class="result-row">
                <span class="result-label">–°—É–º–º–∞ –æ–±—Ä–∞—Ç–Ω—ã—Ö –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤</span>
                <span class="result-value" id="sumInverse">-</span>
            </div>

            <div class="result-row">
                <span class="result-label">–°—Ç–∞—Ç—É—Å</span>
                <span class="result-value" id="hasArbitrage">-</span>
            </div>

            <div class="profit-highlight">
                <div class="profit-label">–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</div>
                <div class="profit-value" id="profitPercent">0%</div>
            </div>

            <div class="bet-breakdown" id="betBreakdown"></div>

            <div class="formula-box">
                <div class="formula-title">üìê –†–∞—Å—á—ë—Ç—ã:</div>
                <div class="formula" id="formulaText"></div>
            </div>

            <div style="margin: 20px 0; min-height: 90px;">
                <div id="yandex_rtb_R-A-17819625-2"></div>
                <script>
                    window.yaContextCb.push(() => {
                        Ya.Context.AdvManager.render({
                            "blockId": "R-A-17819625-1",
                            "renderTo": "yandex_rtb_R-A-17819625-2"
                        })
                    })
                </script>
            </div>
        </div>

        <div class="calculator-card" style="margin-top: 30px;">
            <div class="section-title">üìö –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</div>
            <div style="line-height: 1.8; color: var(--color-text-secondary);">
                <p><strong>–≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç</strong> –ø–æ–º–æ–≥–∞–µ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –±–µ—Ç—Ç–∏–Ω–≥–∞.</p>
                
                <h3 style="color: var(--color-primary); margin-top: 20px;">–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–Ω–∞–ª–∏–∑?</h3>
                <p>–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É–ª—É: <code>1/K‚ÇÅ + 1/K‚ÇÇ < 1</code></p>
                
                <h3 style="color: var(--color-primary); margin-top: 20px;">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</h3>
                <ol>
                    <li>–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞</li>
                    <li>–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å—Ö–æ–¥–æ–≤</li>
                    <li>–í–≤–µ–¥–∏—Ç–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã</li>
                    <li>–ù–∞–∂–º–∏—Ç–µ "–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å"</li>
                    <li>–ò–∑—É—á–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</li>
                </ol>
                
                <h3 style="color: var(--color-primary); margin-top: 20px;">‚ö†Ô∏è –í–ê–ñ–ù–û:</h3>
                <p>–°—Ç–∞–≤–∫–∏ –Ω–∞ —Å–ø–æ—Ä—Ç —Å–≤—è–∑–∞–Ω—ã —Å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º–∏ —Ä–∏—Å–∫–∞–º–∏. –≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º.</p>
            </div>
        </div>
    </div>

    <footer>
        <p><strong>¬© 2025 –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ê–Ω–∞–ª–∏–∑–∞</strong></p>
        <p>–≠—Ç–æ—Ç —Å–∞–π—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–µ–π.</p>
    </footer>

    <script>
        function updateInputs() {
            const outcomes = document.getElementById('outcomes').value;
            const k3Group = document.getElementById('k3Group');
            if (outcomes === '3') { k3Group.style.display = 'block'; } else { k3Group.style.display = 'none'; }
        }

        function calculate() {
            const bankroll = parseFloat(document.getElementById('bankroll').value);
            const k1 = parseFloat(document.getElementById('k1').value);
            const k2 = parseFloat(document.getElementById('k2').value);
            const outcomes = document.getElementById('outcomes').value;
            const k3 = outcomes === '3' ? parseFloat(document.getElementById('k3').value) : null;

            const errorMsg = document.getElementById('errorMsg');
            errorMsg.classList.remove('show');

            if (!bankroll || bankroll <= 0) { showError('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—É–º–º—É'); return; }
            if (!k1 || k1 < 1.01) { showError('–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç 1 –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±–æ–ª—å—à–µ 1.01'); return; }
            if (!k2 || k2 < 1.01) { showError('–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç 2 –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±–æ–ª—å—à–µ 1.01'); return; }
            if (outcomes === '3' && (!k3 || k3 < 1.01)) { showError('–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç 3 –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±–æ–ª—å—à–µ 1.01'); return; }

            let sumInverse, stakes, payouts;
            
            if (outcomes === '2') {
                sumInverse = (1/k1) + (1/k2);
                stakes = [bankroll * (1/k1) / sumInverse, bankroll * (1/k2) / sumInverse];
                payouts = [stakes[0] * k1, stakes[1] * k2];
            } else {
                sumInverse = (1/k1) + (1/k2) + (1/k3);
                stakes = [bankroll * (1/k1) / sumInverse, bankroll * (1/k2) / sumInverse, bankroll * (1/k3) / sumInverse];
                payouts = [stakes[0] * k1, stakes[1] * k2, stakes[2] * k3];
            }

            const hasArbitrage = sumInverse < 1;
            const profitPercent = hasArbitrage ? ((1 - sumInverse) * 100).toFixed(2) : 0;
            const profit = hasArbitrage ? (payouts[0] - bankroll).toFixed(2) : 0;

            document.getElementById('sumInverse').textContent = sumInverse.toFixed(4);
            document.getElementById('hasArbitrage').textContent = hasArbitrage ? '‚úÖ –ë–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è' : '‚ùå –ù–µ–±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è';
            document.getElementById('hasArbitrage').style.color = hasArbitrage ? 'var(--color-success)' : 'var(--color-error)';
            
            document.getElementById('profitPercent').textContent = hasArbitrage ? `+${profitPercent}%` : '0%';
            document.getElementById('profitPercent').style.color = hasArbitrage ? 'var(--color-success)' : 'var(--color-error)';

            const betBreakdown = document.getElementById('betBreakdown');
            betBreakdown.innerHTML = '';

            stakes.forEach((stake, index) => {
                const coeff = index === 0 ? k1 : (index === 1 ? k2 : k3);
                betBreakdown.innerHTML += `
                    <div class="bet-card">
                        <h3>–í–∞—Ä–∏–∞–Ω—Ç ${index + 1}</h3>
                        <div class="bet-detail"><span>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç:</span><strong>${coeff.toFixed(2)}</strong></div>
                        <div class="bet-detail"><span>–°—É–º–º–∞:</span><strong>${stake.toFixed(2)} ‚ÇΩ</strong></div>
                        <div class="bet-detail"><span>–í—ã–ø–ª–∞—Ç–∞:</span><strong>${payouts[index].toFixed(2)} ‚ÇΩ</strong></div>
                        <div class="bet-detail" style="margin-top: 10px; padding-top: 10px; border-top: 1px solid var(--color-border);"><span>–†–µ–∑—É–ª—å—Ç–∞—Ç:</span><strong style="color: var(--color-success);">+${(payouts[index] - bankroll).toFixed(2)} ‚ÇΩ</strong></div>
                    </div>
                `;
            });

            const formulaText = document.getElementById('formulaText');
            if (outcomes === '2') {
                formulaText.innerHTML = `S = 1/${k1} + 1/${k2} = ${sumInverse.toFixed(4)}<br>–í–∞—Ä–∏–∞–Ω—Ç‚ÇÅ = ${bankroll} √ó (1/${k1}) / ${sumInverse.toFixed(4)} = ${stakes[0].toFixed(2)} ‚ÇΩ<br>–í–∞—Ä–∏–∞–Ω—Ç‚ÇÇ = ${bankroll} √ó (1/${k2}) / ${sumInverse.toFixed(4)} = ${stakes[1].toFixed(2)} ‚ÇΩ<br>–†–µ–∑—É–ª—å—Ç–∞—Ç = ${hasArbitrage ? `+${profit} ‚ÇΩ (${profitPercent}%)` : '0 ‚ÇΩ'}`;
            } else {
                formulaText.innerHTML = `S = 1/${k1} + 1/${k2} + 1/${k3} = ${sumInverse.toFixed(4)}<br>–í–∞—Ä–∏–∞–Ω—Ç‚ÇÅ = ${bankroll} √ó (1/${k1}) / ${sumInverse.toFixed(4)} = ${stakes[0].toFixed(2)} ‚ÇΩ<br>–í–∞—Ä–∏–∞–Ω—Ç‚ÇÇ = ${bankroll} √ó (1/${k2}) / ${sumInverse.toFixed(4)} = ${stakes[1].toFixed(2)} ‚ÇΩ<br>–í–∞—Ä–∏–∞–Ω—Ç‚ÇÉ = ${bankroll} √ó (1/${k3}) / ${sumInverse.toFixed(4)} = ${stakes[2].toFixed(2)} ‚ÇΩ<br>–†–µ–∑—É–ª—å—Ç–∞—Ç = ${hasArbitrage ? `+${profit} ‚ÇΩ (${profitPercent}%)` : '0 ‚ÇΩ'}`;
            }

            document.getElementById('results').classList.add('show');

            if (!hasArbitrage) { showError(`‚ÑπÔ∏è S = ${sumInverse.toFixed(4)} ‚â• 1. –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è –Ω–µ–±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã.`); }

            window.lastCalculation = { bankroll, k1, k2, k3: outcomes === '3' ? k3 : null, outcomes, sumInverse, hasArbitrage, profitPercent, stakes, payouts, timestamp: new Date().toLocaleString('ru-RU') };
        }

        function showError(message) { const errorMsg = document.getElementById('errorMsg'); errorMsg.textContent = message; errorMsg.classList.add('show'); }

        function saveToHistory() {
            if (!window.lastCalculation) { alert('–°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∞–Ω–∞–ª–∏–∑!'); return; }
            let history = JSON.parse(localStorage.getItem('arbitrageHistory') || '[]');
            history.unshift(window.lastCalculation);
            if (history.length > 10) history = history.slice(0, 10);
            localStorage.setItem('arbitrageHistory', JSON.stringify(history));
            alert('‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω!');
            loadHistory();
        }

        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('arbitrageHistory') || '[]');
            const historySection = document.getElementById('historySection');
            const historyList = document.getElementById('historyList');
            
            if (history.length === 0) { historySection.style.display = 'none'; return; }
            
            historySection.style.display = 'block';
            historyList.innerHTML = '';
            
            history.forEach((item, index) => {
                const profitColor = item.hasArbitrage ? 'var(--color-success)' : 'var(--color-error)';
                historyList.innerHTML += `
                    <div style="background: rgba(33, 128, 141, 0.05); padding: 15px; border-radius: 8px; margin-bottom: 10px; border-left: 3px solid ${profitColor};">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <strong>${item.timestamp}</strong>
                            <span style="color: ${profitColor}; font-weight: 600;">${item.hasArbitrage ? `+${item.profitPercent}%` : '–ù–µ–±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω–æ'}</span>
                        </div>
                        <div style="font-size: 14px; color: var(--color-text-secondary);">üí∞ –°—É–º–º–∞: ${item.bankroll} ‚ÇΩ | üî¢ –ö–æ—ç—Ñ—Ñ: ${item.k1} / ${item.k2}${item.k3 ? ` / ${item.k3}` : ''}</div>
                        <button onclick="restoreCalculation(${index})" style="margin-top: 10px; padding: 8px 16px; background: var(--color-primary); color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 13px;">‚Ü©Ô∏è –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                    </div>
                `;
            });
        }

        function restoreCalculation(index) {
            const history = JSON.parse(localStorage.getItem('arbitrageHistory') || '[]');
            const item = history[index];
            if (!item) return;
            
            document.getElementById('bankroll').value = item.bankroll;
            document.getElementById('k1').value = item.k1;
            document.getElementById('k2').value = item.k2;
            document.getElementById('outcomes').value = item.outcomes;
            
            if (item.outcomes === '3' && item.k3) {
                document.getElementById('k3').value = item.k3;
                document.getElementById('k3Group').style.display = 'block';
            }
            
            calculate();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function clearHistory() {
            if (confirm('–£–¥–∞–ª–∏—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é?')) {
                localStorage.removeItem('arbitrageHistory');
                loadHistory();
                alert('‚úÖ –ò—Å—Ç–æ—Ä–∏—è –æ—á–∏—â–µ–Ω–∞!');
            }
        }

        window.onload = function() {
            document.getElementById('k1').value = '2.40';
            document.getElementById('k2').value = '1.75';
            setTimeout(() => { calculate(); loadHistory(); }, 500);
        };
    </script>
</body>
</html>
